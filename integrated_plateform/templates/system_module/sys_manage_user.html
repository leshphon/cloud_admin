{% extends 'system_module/sys_module_base.html' %}
{% load static %}
{% load staticfiles %}
{% block tag_title %}
<title>sys_manage_user</title>
{% endblock %}
{% block extracss %}
    <link href="{% static 'assets/global/css/components.min.css' %}" rel="stylesheet" id="style_components" type="text/css" /> <!-- sidebar字体加粗 -->
    <link href="{% static 'assets/global/css/plugins.min.css' %}" rel="stylesheet" type="text/css" />

    <!-- Data Tables -->
    <link href="{% static 'css/plugins/dataTables/dataTables.bootstrap.css' %}" rel="stylesheet">


    <script type="text/javascript" src="{% static 'js/jQuery.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/sys_create_user.js' %}"></script>
    <!-- BEGIN CORE PLUGINS -->
    <script src="{% static 'assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/global/plugins/jquery.blockui.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->
{% endblock %}

{% block content %}
    <div class="wrapper wrapper-content animated fadeInRight gray-bg">
        <div class="container-fluid">
            <table class="table table-striped table-bordered table-hover dataTables-example">
                <caption><h3 class="pull-left">用户信息</h3><button data-toggle="modal" class="btn btn-white btn-default btn-sm pull-right" data-target="#myModal">创建用户</button></caption>
                <thead>
                <tr>
                    {% for line in user_fields %}
                    <th>{{ line.name }}</th>
                    {% endfor %}
                    <th>角色</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    {% for line in user_lists %}
                        <tr>
                            {% for key,value in line.items %}
                                {% if key == "user_obj" %}
                                    <td>{{ value.name }}</td>
                                    <td>{{ value.email }}</td>
                                    <td>{{ value.department }}</td>
                                {% endif %}
                            {% endfor %}
                             {% for key,value in line.items %}
                                {% if key == "role_name" %}
                                     <td>{{ value }}</td>
                                {% endif %}
                            {% endfor %}
                            <td>
                                <div class="btn-group">
                                    <a href="#" class="btn btn-white btn-sm dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-wrench"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="btn" href="#">编辑</a></li>
                                        <li><a id="del_user" class="btn" href="#">删除</a></li>
                                    </ul>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                </tr>
                </tbody>
            </table>
        </div>
    </div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4><strong>创建用户</strong></h4>
            </div>
            <div class="modal-body">
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade in active">
                        <form id="sys_create_user_form" role="form" action="{% url 'system_module:create_user' %}" method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-sm-6 b-r">
                                    <div class="form-group">
                                        <label>用户名：</label>
                                        <input type="text" name="username" placeholder="请输入用户名" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label>邮箱：</label>
                                        <input type="email" name="email" placeholder="邮箱" class="form-control">
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label>密码：</label>
                                        <input id="password_1" type="password" placeholder="请输入密码" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label>确认密码：</label>
                                        <input id="password_2" type="password" name="password" placeholder="请确认密码" class="form-control">
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label class="control-label">角色：</label>
                                        <select class="form-control" name="user_role" type="text">
                                            {% for rr in role_lists %}
                                            <option value="{{ rr.id }}">{{ rr.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div>
                    <button class="btn pull-right m-t-n-xs" data-dismiss="modal">
                        <strong>取消</strong>
                    </button>
                    <span class="pull-right">&ensp;&ensp;</span>
                    <button id="sys_create_user_sub" class="btn btn-primary pull-right m-t-n-xs" type="button">
                        <strong>确认</strong>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div><!-- /.modal -->

{% endblock %}